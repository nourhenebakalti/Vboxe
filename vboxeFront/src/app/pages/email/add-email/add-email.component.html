<div class="card">
    <div class="card-body">
        <form (ngSubmit)="onSubmit()" class="was-validated" enctype="multipart/form-data">

            <div class="form-group">
                <label for="subject">To:</label>
                <input type="email" id="subject" name="subject" [(ngModel)]="reciever" class="form-control" placeholder="Recipient email" required>
            </div>
            <div class="form-group">
                <label for="subject">Subject:</label>
                <input type="text" id="subject" name="subject" [(ngModel)]="subject" class="form-control" placeholder="Enter subject" required>
            </div>
            <div class="form-group">
                <label for="content">Content:</label>
                <textarea id="content" name="content" class="form-control" [(ngModel)]="content"  rows="5" placeholder="Enter content" required></textarea>
            </div>
            <div *ngIf="signatures.length>0" class="form-group">
                <label for="signatureSelect">Select Signature:</label>
                <select id="signatureSelect" name="signatureSelect" class="form-control" [(ngModel)]="selectedSignature">
                    <option value="" disabled selected>Choose a signature</option> 
                    <option *ngFor="let signature of signatures" [ngValue]="signature">{{ signature.nom }}</option>
                </select>
                
              </div>
              <div *ngIf="signatures.length===0" class="form-group">
                <p>you has not signatures.</p>
              </div>
              <div *ngIf="selectedSignature!=null" class="form-group ">
                <div class="form-group signature-info text-center">
                    <h5 class="signature-title">Signature Details</h5>
                    <div class="signature-container">
                        <p class="signature-name">{{ selectedSignature?.nom }}</p>
                        <img class="imgSignature" [src]="'data:image/png;base64,' + selectedSignature?.signature" alt="Signature">
                    </div>
                </div>
                
            </div>
            
            <div class="button">
                <button type="button" class="btn btn-primary mr-3" (click)="openSignatureModal()">Add Signature</button>
                <button  *ngIf="!reciever || !subject || !content" disabled type="submit" class="btn btn-primary ">Send Message</button>
                <button  *ngIf="reciever && subject && content"  type="submit" class="btn btn-primary">Send Message</button>
            </div>
            
        </form>
    </div>
</div>
